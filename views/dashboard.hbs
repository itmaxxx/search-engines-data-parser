<html>
	<head>
		<title>Панель управления</title>
		<meta charset='utf-8' />
		<link
			href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css'
			rel='stylesheet'
			integrity='sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x'
			crossorigin='anonymous'
		/>
	</head>

	<body>
		{{> menu}}

		<div class='container mt-3'>
      <h1>Панель управления</h1>

			<form class="row g-2" id="parseForm">
				<div class="col-auto">
					<label for="query" class="visually-hidden">Поисковый запрос</label>
					<input type="text" name="query" class="form-control" id="query" placeholder="Поисковый запрос">
				</div>
				<div class="col-auto">
					<button type="submit" class="btn btn-primary mb-1" id="parse">Спарсить <i style="height: 20px; margin-top: -3px;" data-feather="search"></i></button>
				</div>
				<div class="col-auto">
					<a class="btn btn-primary" href="/dashboard">Обновить <i style="height: 20px; margin-top: -3px;" data-feather="refresh-ccw"></i></a>
				</div>
			</form>
			
			<div class='row mt-2'>
				<div class='col'>
					<table class='table table-bordered table-hover'>
						<thead>
							<tr>
								<th scope='col'>#</th>
								<th>Запрос</th>
								<th>Статус парсинга</th>
								<th>Кол-во ссылок</th>
								<th>Действия</th>
							</tr>
						</thead>
						<tbody>
							{{#each queries}}
								<tr>
									<th scope='row'>{{this.Id}}</th>
									<td>{{this.Query}}</td>
									<td>{{this.Status}} {{this.Error}}</td>
									<td>{{this.CurrentLink}} из {{this.LinksCount}}</td>
									<td class="d-flex justify-content-center">
										<div class="btn-group" role="group" aria-label="Basic example">
  										{{!-- <a href='{{this.Output}}' class='btn btn-primary'>Результаты</a> --}}
  										<a href='/dashboard/details/{{this.Id}}' class='btn btn-success'>Детальней</a>
  										<a href='#' onclick="deleteQuery(this, {{this.Id}})" class='btn btn-danger'>Удалить</a>
										</div>
									</td>
								</tr>
							{{/each}}
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<script src="/scripts/parse.js"></script>
		<script src="/scripts/delete.js"></script>
		{{> footer}}
	</body>
</html>